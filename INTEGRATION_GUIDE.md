# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Telegram –∏ WhatsApp

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram Bot

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–°–æ—Ñ–∏—è –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –†–µ–ø–µ—Ç–∏—Ç–æ—Ä")
4. –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "sofia_math_tutor_bot")
5. BotFather –≤—ã–¥–∞—Å—Ç –≤–∞–º —Ç–æ–∫–µ–Ω –±–æ—Ç–∞. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!

**–ü—Ä–∏–º–µ—Ä —Ç–æ–∫–µ–Ω–∞:** `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ @userinfobot**
1. –ù–∞–π–¥–∏—Ç–µ –≤ Telegram [@userinfobot](https://t.me/userinfobot)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ë–æ—Ç –≤–µ—Ä–Ω–µ—Ç –≤–∞—à ID

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ API**
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∞—à–µ–º—É –±–æ—Ç—É
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/getUpdates
   ```
3. –ù–∞–π–¥–∏—Ç–µ –≤ –æ—Ç–≤–µ—Ç–µ –ø–æ–ª–µ `"chat":{"id": 123456789}`

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789
```

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `bun run dev`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∞ —Å–∞–π—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –≤ Telegram

---

## üí¨ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WhatsApp

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å WhatsApp –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

### –í–∞—Ä–∏–∞–Ω—Ç 1: Green API (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –†–æ—Å—Å–∏–∏)

**Green API** - –ø—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π WhatsApp.

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [green-api.com](https://green-api.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Å—Ç–∞–Ω—Å (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –¥–æ—Å—Ç—É–ø–µ–Ω)
3. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –≤ WhatsApp
4. –ü–æ–ª—É—á–∏—Ç–µ `idInstance` –∏ `apiTokenInstance`

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

```env
WHATSAPP_PHONE=79999999999  # –≤–∞—à –Ω–æ–º–µ—Ä
WHATSAPP_API_KEY=your_api_token_instance
WHATSAPP_INSTANCE_ID=your_id_instance
```

**–ö–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è `src/app/api/booking/route.ts`:**

```typescript
// Green API Integration
const greenApiUrl = `https://api.green-api.com/waInstance${process.env.WHATSAPP_INSTANCE_ID}/sendMessage/${process.env.WHATSAPP_API_KEY}`;

await fetch(greenApiUrl, {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    chatId: `${whatsappPhone}@c.us`,
    message: formattedMessage,
  }),
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Twilio (–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π)

**Twilio** - –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è SMS –∏ WhatsApp.

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [twilio.com](https://www.twilio.com/)
2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ WhatsApp –≤ –∫–æ–Ω—Å–æ–ª–∏
3. –ü–æ–ª—É—á–∏—Ç–µ Account SID –∏ Auth Token
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WhatsApp Sender

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

```env
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886
WHATSAPP_PHONE=whatsapp:+79999999999
```

**–ö–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**

```typescript
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç: bun add twilio
import twilio from 'twilio';

const client = twilio(
  process.env.TWILIO_ACCOUNT_SID,
  process.env.TWILIO_AUTH_TOKEN
);

await client.messages.create({
  from: process.env.TWILIO_WHATSAPP_FROM,
  to: process.env.WHATSAPP_PHONE,
  body: formattedMessage,
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: WhatsApp Business API (–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π)

–î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

1. –ü–æ–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ [WhatsApp Business Platform](https://business.whatsapp.com/)
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–¥–æ–±—Ä–µ–Ω–∏—è Facebook
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∏–∑–Ω–µ—Å
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ Facebook
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---

## üîî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –¢–µ—Å—Ç Telegram:

```bash
curl -X POST https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/sendMessage \
  -H "Content-Type: application/json" \
  -d '{"chat_id": "<–í–ê–®_CHAT_ID>", "text": "–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"}'
```

### –¢–µ—Å—Ç —Ñ–æ—Ä–º—ã:

```bash
curl -X POST http://localhost:3000/api/booking \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–¢–µ—Å—Ç",
    "phone": "+79999999999",
    "email": "test@example.com",
    "message": "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞"
  }'
```

---

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Telegram

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Chat ID
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ 401 Unauthorized
- ‚úÖ –¢–æ–∫–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–ª
- ‚úÖ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather

### WhatsApp

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–∫–∫–∞—É–Ω—Ç WhatsApp –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞ (–¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤)

**–ü—Ä–æ–±–ª–µ–º–∞:** Green API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∏–Ω—Å—Ç–∞–Ω—Å–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ QR-–∫–æ–¥ –±—ã–ª –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏ –≤ `src/app/api/booking/route.ts`:

```typescript
console.log("‚úÖ Telegram notification sent");
console.log("‚úÖ WhatsApp notification sent");
console.error("‚ùå Error sending notification:", error);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–°–æ–∑–¥–∞–π—Ç–µ endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π:

```typescript
// src/app/api/health/route.ts
export async function GET() {
  const status = {
    telegram: !!process.env.TELEGRAM_BOT_TOKEN,
    whatsapp: !!process.env.WHATSAPP_API_KEY,
  };

  return Response.json(status);
}
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ (–¥–æ 100 –∑–∞—è–≤–æ–∫/–¥–µ–Ω—å):**
   - Telegram Bot (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - Green API (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ)

2. **–î–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –æ–±—ä–µ–º–æ–≤ (100-1000 –∑–∞—è–≤–æ–∫/–¥–µ–Ω—å):**
   - Telegram Bot (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - Green API (–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ)

3. **–î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ (1000+ –∑–∞—è–≤–æ–∫/–¥–µ–Ω—å):**
   - Telegram Bot (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - WhatsApp Business API (—Ç—Ä–µ–±—É–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏)

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ Telegram

```typescript
await fetch(`https://api.telegram.org/bot${telegramBotToken}/sendMessage`, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    chat_id: telegramChatId,
    text: formattedMessage,
    reply_markup: {
      inline_keyboard: [
        [
          { text: "‚úÖ –ü—Ä–∏–Ω—è—Ç—å", callback_data: "accept" },
          { text: "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å", callback_data: "decline" }
        ]
      ]
    }
  }),
});
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

```typescript
const formattedMessage = `
<b>üîî –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é!</b>

<b>üë§ –ò–º—è:</b> ${name}
<b>üìû –¢–µ–ª–µ—Ñ–æ–Ω:</b> <code>${phone}</code>
${email ? `<b>üìß Email:</b> ${email}` : ""}
${message ? `<b>üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ:</b>\n${message}` : ""}

<i>–í—Ä–µ–º—è: ${new Date().toLocaleString("ru-RU")}</i>
`.trim();
```

---

**–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?** –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [Green API](https://green-api.com/docs/)
- [Twilio WhatsApp](https://www.twilio.com/docs/whatsapp)
